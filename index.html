<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Recite</title>

</head>
<body>

<?php
foreach($syllables as $syllable){
    if(!(int)$syllable)
        echo '<audio src="storage/' . $syllable . '.wav" ';
    else
        echo "gap=" . $syllable . "></audio>\n";
}
?>
<!-- 	<audio src="storage/dǎo.wav" gap=test></audio>
	<audio src="storage/gān.wav"></audio>
	<audio src="storage/he.wav"></audio>
	<audio src="storage/jì.wav"></audio>
	<audio src="storage/mì.wav"></audio>
	<audio src="storage/qián.wav"></audio>
	<audio src="storage/qí.wav"></audio>
	<audio src="storage/qíng.wav"></audio> -->

	<script>
		var audios = document.getElementsByTagName("audio");

		function player(num){
			if(audios[num] == undefined)
				return;
			audios[num].play();
			audios[num].loop = false;
			console.log(audios[num]);
			audios[num].addEventListener('ended', function () {
				var gap = audios[num].getAttribute('gap');
				if(!gap)
					gap = 0;
				console.log('num:' + num + '  |  ' + 'gap:' + gap);
				num++;

			    setTimeout(function(){
			    	player(num)
				},gap);
			    return;
			}, false);

		}

    	player(0);
	</script>
</body>
</html>